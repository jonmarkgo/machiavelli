from django.urls import path, re_path
from django.views.decorators.cache import cache_page

import machiavelli.views as views

urlpatterns = [
	path('', views.SummaryView.as_view(), name='summary'),
	path('games/all_finished',
		views.AllFinishedGamesList.as_view(),
		name="games-all-finished"), 
	path('games/finished',
		views.MyFinishedGamesList.as_view(),
		name="games-my-finished"), 
	path('games/other_active',
		views.OtherActiveGamesList.as_view(),
		name="games-other-active"), 
	path('games/my_active',
		views.MyActiveGamesList.as_view(),
		name="games-my-active"), 
	path('games/joinable',
		views.JoinableGamesList.as_view(),
		name="games-joinable"), 
	path('games/pending',
		views.PendingGamesList.as_view(),
		name='games-pending'),
	path('revolutions',
		views.RevolutionList.as_view(),
		name='revolution_list'),
	path('ranking',
		views.HallOfFameView.as_view(),
		name='hall-of-fame'),
	path('ranking/(?P<key>[-\w]+)/(?P<val>[-\w]+)', views.ranking, name='ranking'),
	path('overthrow/(?P<revolution_id>\d+)',
		views.OverthrowView.as_view(),
		name='overthrow'),
	path('undo_overthrow/(?P<revolution_id>\d+)',
		views.UndoOverthrowView.as_view(),
		name='undo_overthrow'),
	path('new_game',
		views.CreateGameView.as_view(),
		name='new-game'),
	path('new_team_game',
		views.CreateTeamGameView.as_view(),
		name='new_team_game'),
	path('game/(?P<slug>[-\w]+)/invite',
		views.GameInvitationView.as_view(),
		name='invite-users'),
	path('game/(?P<slug>[-\w]+)/join',
		views.JoinGameView.as_view(),
		name='join-game'),
	path('game/(?P<slug>[-\w]+)/public',
		views.MakeGamePublic.as_view(),
		name='make-public'),
	path('game/(?P<slug>[-\w]+)/leave',
		views.LeaveGameView.as_view(),
		name='leave-game'),
	path('game/(?P<slug>[-\w]+)/log', views.logs_by_game, name='game-log'),
	path('game/(?P<slug>[-\w]+)/areas',
		views.GameAreaListView.as_view(),
		name='gamearea-list'),
	path('game/(?P<slug>[-\w]+)/turn',
		views.TurnLogListView.as_view(),
		name='turn-log-list'),
	path('game/(?P<slug>[-\w]+)/excommunicate/(?P<player_id>\d+)',
		views.ExcommunicationView.as_view(action="punish"),
		name='excommunicate'),
	path('game/(?P<slug>[-\w]+)/forgive/(?P<player_id>\d+)',
		views.ExcommunicationView.as_view(action="forgive"),
		name='forgive-excommunication'),
	path('game/(?P<slug>[-\w]+)/lend/(?P<player_id>\d+)',
		views.GiveMoneyView.as_view(),
		name='lend'),
	path('game/(?P<slug>[-\w]+)/borrow',
		views.BorrowMoneyView.as_view(),
		name='borrow-money'),
	path('game/(?P<slug>[-\w]+)/repay/(?P<credit_id>\d+)$',
		views.ReturnMoneyView.as_view(),
		name='return-credit'),
	path('game/(?P<slug>[-\w]+)/assassination',
		views.AssassinationView.as_view(),
		name='assassination'),
	path('game/(?P<slug>[-\w]+)/confirm_orders',
		views.ConfirmOrdersView.as_view(),
		name='confirm-orders'),
	path('game/(?P<slug>[-\w]+)/undo',
		views.UndoActionsView.as_view(),
		name='undo-actions'),
	path('game/(?P<slug>[-\w]+)/surrender',
		views.SurrenderView.as_view(),
		name='surrender'),
	path('game/(?P<slug>[-\w]+)/delete_order/(?P<order_id>\d+)$',
		views.DeleteOrderView.as_view(),
		name='delete-order'),
	path('game/(?P<slug>[-\w]+)/expenses',
		views.ExpenseCreateView.as_view(),
		name='expenses'),
	path('game/(?P<slug>[-\w]+)/undo_expense/(?P<expense_id>\d+)$',
		views.ExpenseDeleteView.as_view(),
		name='undo-expense'),
	path('game/(?P<slug>[-\w]+)/taxation', views.taxation, name='taxation'),
	path('game/(?P<slug>[-\w]+)/whisper',
		views.WhisperCreateView.as_view(),
		name='new-whisper'),
	path('game/(?P<slug>[-\w]+)/whisper_list',
		views.WhisperListView.as_view(),
		name='whisper-list'),
	path('game/(?P<slug>[-\w]+)/journal',
		views.EditJournalView.as_view(),
		name='edit-journal'),
	path('game/(?P<slug>[-\w]+)/team_messages',
		views.TeamMessageListView.as_view(),
		name='team_messages'),
	path('game/(?P<slug>[-\w]+)/report',
		views.ErrorReportCreateView.as_view(),
		name='new-report'),
	path('game/(?P<slug>[-\w]+)',
		views.GameRouter.as_view(),
		name='show-game'),
]

